{% extends "base.html" %}
{% block content %}
<a href="/client/home" class="top-right-link" style="position: absolute; top: 110px; right: 40px; display: none;">Back to Home</a>
<h1 style="margin-bottom: 30px;">My Profile</h1>

<div class="profile-layout">
    <div class="profile-card">
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 1px solid var(--border); padding-bottom: 30px;">
            <div style="width: 100px; height: 100px; background: #e0e7ff; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--primary);">
                <i class="fas fa-user"></i>
            </div>
            <h2 style="margin: 0;">{{ user.full_name }}</h2>
            <div style="color: var(--text-secondary); margin-top: 5px;">{{ user.username }}</div>
        </div>

        <form action="/client/profile/update" method="post">
            <div class="profile-row">
                <div class="field-label">Full Name</div>
                <input type="text" name="full_name" value="{{ user.full_name }}">
                <i class="fas fa-pen" style="color: #cbd5e1;"></i>
            </div>

            <div class="profile-row">
                <div class="field-label">Gender</div>
                <select name="gender">
                    <option value="Male" {% if user.gender == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if user.gender == 'Female' %}selected{% endif %}>Female</option>
                </select>
                <i class="fas fa-pen" style="color: #cbd5e1;"></i>
            </div>

            <div class="profile-row" style="align-items: start;">
                <div class="field-label">Interests</div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; padding: 5px 0;">
                    {% for interest in ["Creativity", "Entertainment", "Food", "Games", "Pets", "Beauty"] %}
                    <label style="margin: 0; cursor: pointer; display: flex; align-items: center; gap: 6px; font-weight: normal; font-size: 0.95rem; background: #f8fafc; padding: 6px 12px; border-radius: 20px; border: 1px solid var(--border);">
                        <input type="checkbox" name="interests" value="{{ interest }}" 
                        {% if user.profile and interest in user.profile.interests %}checked{% endif %}>
                        {{ interest }}
                    </label>
                    {% endfor %}
                </div>
                <i></i>
            </div>

            <div class="profile-row">
                <div class="field-label">Password</div>
                <input type="password" name="password" value="{{ user.password_hash }}">
                <i class="fas fa-pen" style="color: #cbd5e1;"></i>
            </div>
            
            <button class="btn btn-full" style="margin-top: 20px;">Save Changes</button>
        </form>
    </div>

    <div style="display: flex; flex-direction: column; gap: 20px;">
        <a href="/client/orders" class="btn btn-success btn-full" style="padding: 20px;">
            <i class="fas fa-box"></i> Order History
        </a>
        
        <a href="/logout" class="btn btn-danger btn-full" style="padding: 15px;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
</div>

{% endblock %}
